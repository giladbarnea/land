#compdef util

_fetchfile() { compadd -x "$(docstring fetchfile "${LAND}/util.sh")"; }
compdef _fetchfile fetchfile

_fetchhtml() {
	compadd -x "$(docstring fetchhtml "${LAND}/util.sh")"
}
compdef _fetchhtml fetchhtml

_zprofc() {
	compadd -x "$(docstring zprofc "${LAND}/util.sh")"
	_arguments \
		":: :( $(docstring.getopts zprofc "${LAND}/util.sh") )"
}
compdef _zprofc zprofc

_timeit() {
	compadd -x "$(docstring timeit "${LAND}/util.sh")"
	_describe command "(
				--show-cmd-output:'By default, the output of the command is not shown. Use this flag to show it.'
				''
	)"
}
compdef _timeit timeit

_idletime() {
	compadd -x "$(docstring idletime "${LAND}/util.sh")"
	_arguments "1: :(s ms us ns)"
}
compdef _idletime idletime

_unixtime() {
	compadd -x "$(docstring unixtime "${LAND}/util.sh")"
	_arguments "1: :(s ms us ns)"
}
compdef _unixtime unixtime

_humantime() {
	compadd -x "$(docstring humantime "${LAND}/util.sh")"
}
compdef _humantime humantime

_filter() { compadd -x "$(docstring filter "${LAND}/util.sh")"; }
compdef _filter filter

_filterwords() { compadd -x "$(docstring filterwords "${LAND}/util.sh")"; }
compdef _filterwords filterwords

_import() {
	compadd -x "$(docstring import "${LAND}/util.sh")"
	_describe command "(
        -{t,-timeout}:'TIMEOUT_SEC. Default 2'
        --if-undefined:'CMD. Do the import only if CMD is not defined'
        -{v,-verbose}:''
        --no-local-import:'Do not try to source the file from various local paths before trying to download it'
		)"
}
compdef _import import

_isdefined() {
	compadd -x "$(docstring isdefined "${LAND}/util.sh")"
	_arguments "1:command:_command_names"
}
compdef _isdefined isdefined

_loadenvfile() {
	compadd -x "$(docstring loadenvfile "${LAND}/util.sh")"
	_arguments "1:file:_files"
}
compdef _loadenvfile loadenvfile

_map() { compadd -x "$(docstring map "${LAND}/util.sh")"; }
compdef _map map

_onmodified() {
	compadd -x "$(docstring onmodified "${LAND}/util.sh")"
	_arguments "1:file:_files"
	_describe command "(
				-{c,-command}:'COMMAND to run. Incompatible with SCRIPT.'
				-{s,-script}:'PATH of script to run. Incompatible with COMMAND.'
				-{i,-interval}:'INTERVAL_SEC. Default 4'
		)"
}
compdef _onmodified onmodified

_randstr() { compadd -x "$(docstring randstr "${LAND}/util.sh")"; }
compdef _randstr randstr

typeset -a _vex_opts=(
	'---log-only-before-running:Turns off post-run success and failure logs. Implies `---log-before-running`, and incompatible with `---log-only-errors`.'
	'---log-before-running:Logs the command before running it.'
	'---log-only-errors:Skips logging a success message if the command succeeded. Incompatible with `---log-only-before-running`.'
	'---just-run:Dont use `eval "$@"` but simply `"$@"`.'
	'---notify:Not implemented on macos.'
)

_vex() {
	zstyle ':completion::complete:vex:*:descriptions' format "$(docstring vex "${LAND}/util.sh" | richsyntax -x markdown)"
	_describe command _vex_opts
}
compdef _vex vex

_runcmds() {
	compadd -x "$(docstring runcmds "${LAND}/util.sh")"
	_describe command _vex_opts -- "(
		'---no-vex:Dont use vex'
		'---confirm-each:Ask for confirmation before running each command'
		'---confirm-once:Ask for confirmation once before running all commands'
		'---no-exit-on-error:Continue running commands even if one fails'
	)"
}
compdef _runcmds runcmds

_cached() {
	zstyle ':completion::complete:cached:*:descriptions' format "$(docstring cached "${LAND}/util.sh")"
	_describe command "( $(fnnames) )"
}

compdef _cached cached

_clearcached() {
	zstyle ':completion::complete:clearcached:*:descriptions' format "$(docstring clearcached "${LAND}/util.sh")"
	_arguments \
		":: :( $(docstring.getopts clearcached "${LAND}/util.sh") )" \
		{-s,--subpath}'[Subpath of /tmp/land/cached/]::'
}
compdef _clearcached clearcached
