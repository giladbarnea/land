#compdef zsh_advanced_history
_hfind(){
    compadd -x "$(docstring hfind)" "$(printf "─%.0s" {1..$COLUMNS})"
    local options=(
        '-d=[DIR where the command was executed.]'
        '-x=[EXITCODE of the commad. Can be a pattern, e.g "\[^0\]+"]'
        '-f=[ADV_HIST_FILE. Search in this file instead of $ORIG_ZSH_ADVANCED_HISTFILE. Incompatible with -a/--all.]'
        '-a=[Search in backup files as well. Incompatible with -f.]'
        '--all=[Search in backup files as well. Incompatible with -f.]'
        '--fc[Use \`fc -t %s -l 0 | sed -nE ...\` when searching $HISTFILE instead of \`sed -nE ... $HISTFILE\`.]'
        '-p[Pretty]'
        '--pretty[Pretty]'
        '-e[COMMAND_PATTERN is the whole command – `⋮${pattern}$` – not a substring – `⋮.*${pattern}.*`.]'
        '--exact-match[COMMAND_PATTERN is the whole command – `⋮${pattern}$` – not a substring – `⋮.*${pattern}.*`.]'
    )
    _arguments "${options[@]}"
}

_hsub(){
    compadd -x "$(docstring hsub)" "$(printf "─%.0s" {1..$COLUMNS})"
    local extended_regex_option_description='Pass extended regex flag to sed'
    local options=(
        "-E[${extended_regex_option_description}]"
        "-r[${extended_regex_option_description}]"
        "-regexp-extended[${extended_regex_option_description}]"
    )
    _arguments "${options[@]}"
}

_hdel(){
    compadd -x "$(docstring hdel)" "$(printf "─%.0s" {1..$COLUMNS})"
    local extended_regex_option_description='Pass extended regex flag to sed'
    local options=(
        "-E[${extended_regex_option_description}]"
        "-r[${extended_regex_option_description}]"
        "-regexp-extended[${extended_regex_option_description}]"
        '-a=[Delete in backup files as well.]'
        '--all=[Delete in backup files as well.]'
    )
    _arguments "${options[@]}"
}

compdef _hfind hfind
compdef _hsub hsub
compdef _hdel hdel
